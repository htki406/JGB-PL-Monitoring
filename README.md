# 日本国債損益モニタリング

## 📌 概要
本ツールは，日本国債の時価評価と**損益集計**を行うためのPythonベースの計算ツールである．  
財務省が公表する入札結果の数字から仮想ポジションを構築し，**同じく公表する日次利回りデータをもとに割引カーブを引いて**時価評価を行う．  
出力された明細はPower BIに取り込み、月次断面別の損益を可視化する．

## 🧮 主な機能
- QuantLibによる割引カーブ構築と時価評価
- 修正デュレーションの算出
- CSV形式での明細出力
- Power BIによる損益集計と可視化

## 🛠 使用技術
- Python 3.13
- QuantLib-Python
- pandas / numpy
- Power BI

## 📂 ディレクトリ構成

JGB-PL-Monitoring/
├── Input/                      # 元データ（財務省の入札結果・利回りCSVなど）
│   ├── raw/                    # 公開データそのまま
│   └── processed/              # 整形済みデータ（読み込み用）
│
├── Output/                     # 時価評価結果（CSV形式）
│   └── 国内債券明細_時価評価.csv
│
├── Power BI/                   # Power BI連携用ファイル
│   ├── measures.dax.md         # 主要なメジャーのDAX式
│   └── report.pdf              # スクリーンショット
│
├── requirements.txt
└── .gitignore

## ⚠️ 財務省が公表している利回り

財務省が公表している利回りデータは以下のような数字であるため，これをもとにして割引カーブを計算するためにいくつかの仮定をおく。

公表している金利はどのようなものですか
> 流通市場における固定利付国債の実勢価格に基づいて算出した主要年限毎の半年複利金利（半年複利ベースの最終利回り）です。（財務省）

どのように主要年限毎の金利を算出するのですか
> 設定した年限毎に対象となる銘柄を選定し、各銘柄の実勢金利をもとにイールドカーブを形成した上で、主要年限毎の金利をコンスタントマチュリティーベースで算出します。
[主要年限毎の金利算出方法（概要）](https://www.mof.go.jp/jgbs/reference/interest_rate/outline.pdf)

各銘柄の実勢金利はどのように算出するのですか
> 日本証券業協会が公表する公社債店頭売買参考統計値（平均値単価）を用いて各銘柄の実勢金利（半年複利金利）を算出します。

コンスタントマチュリティーベースの金利とはどのようなものですか
> 特定の年限に対する金利です。例えば８年の金利は、８年ちょうどの残存期間に対応する金利をイールドカーブから算出します。

### 仮定

以下の仮定のもと，概算ではあるが国債を時価評価する．

- 各年限グリッドごとに選定する代表銘柄はパー価格である
    - （例）3年の最終利回りを計算する際に用いる残存3年の5年債の価格が100円である
- 半年複利ベースの最終利回りを上記パー債の半年単利クーポンレートで近似できる

以上